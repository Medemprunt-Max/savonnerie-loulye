---
import Layout from '../layouts/Layout.astro';
import ProductCard from '../components/ProductCard.astro';
import ReassuranceItem from '../components/ReassuranceItem.astro';
import { getCollection } from 'astro:content';

const allProducts = await getCollection('products');
const featuredProducts = allProducts.filter((p) => p.data.featured);
---

<Layout title="Savonnerie Loulye — Savons artisanaux du Valgaudemar">

  <!-- ═══════════════════════════════════════════
       SECTION 1 — HERO
       ═══════════════════════════════════════════ -->
  <section class="relative h-screen min-h-[600px] -mt-16 md:-mt-20 flex items-center justify-center overflow-hidden">
    <img
      src="https://images.unsplash.com/photo-1607006344380-b6775a0824a7?w=1600&h=900&fit=crop&q=80"
      alt="Savons artisanaux aux fleurs séchées"
      class="absolute inset-0 w-full h-full object-cover"
    />
    <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/20 to-black/40"></div>

    <div class="relative z-10 text-center px-4 max-w-3xl">
      <h1 class="font-serif text-4xl sm:text-5xl md:text-6xl font-semibold text-white leading-tight drop-shadow-lg">
        Des soins naturels,<br />fabriqués à la main
      </h1>
      <p class="mt-6 text-lg sm:text-xl text-white/90 leading-relaxed max-w-xl mx-auto drop-shadow">
        Savons saponifiés à froid, bougies et cosmétiques artisanaux, créés avec amour dans la vallée du Valgaudemar.
      </p>
      <a
        href="/boutique"
        class="mt-8 inline-block bg-ocre text-white font-medium px-8 py-3.5 rounded-sm hover:bg-ocre-dark transition-colors shadow-lg hover:shadow-xl"
      >
        Découvrir la boutique
      </a>
    </div>

    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
      <svg class="w-6 h-6 text-white/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
      </svg>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════
       SECTION 2 — PRÉSENTATION
       ═══════════════════════════════════════════ -->
  <section class="py-20 sm:py-28">
    <div class="container-site">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
        <div class="fade-in">
          <span class="text-ocre text-sm font-medium tracking-widest uppercase">Notre histoire</span>
          <h2 class="mt-3 font-serif text-3xl sm:text-4xl font-semibold text-gray-800 leading-snug">
            Une savonnerie artisanale au cœur des Alpes
          </h2>
          <p class="mt-6 text-gray-600 leading-relaxed">
            Installée à Aspres-lès-Corps, au pied des sommets du Valgaudemar, la Savonnerie Loulye est née d'une passion pour les ingrédients naturels et le savoir-faire artisanal. Chaque produit est fabriqué à la main, en petites séries, avec des matières premières soigneusement sélectionnées.
          </p>
          <p class="mt-4 text-gray-600 leading-relaxed">
            Nos savons sont saponifiés à froid pour préserver toutes les vertus des huiles végétales et beurres précieux. Le résultat : des soins doux, respectueux de votre peau et de l'environnement.
          </p>
          <a
            href="/a-propos"
            class="mt-8 inline-flex items-center gap-2 text-ocre font-medium hover:gap-3 transition-all"
          >
            En savoir plus
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>

        <div class="fade-in">
          <div class="rounded-sm overflow-hidden shadow-lg">
            <img
              src="https://images.unsplash.com/photo-1600857544200-b2f666a9a2ec?w=800&h=600&fit=crop"
              alt="Fabrication artisanale de savons"
              class="w-full h-auto object-cover"
              loading="lazy"
            />
          </div>
        </div>
      </div>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════
       SECTION 3 — PRODUITS PHARES
       ═══════════════════════════════════════════ -->
  <section class="py-20 sm:py-28 bg-beige">
    <div class="container-site">
      <div class="text-center fade-in">
        <span class="text-ocre text-sm font-medium tracking-widest uppercase">Nos créations</span>
        <h2 class="mt-3 font-serif text-3xl sm:text-4xl font-semibold text-gray-800">
          Produits phares
        </h2>
        <p class="mt-4 text-gray-600 max-w-lg mx-auto">
          Découvrez notre sélection de savons, bougies et coffrets, tous fabriqués avec soin dans notre atelier alpin.
        </p>
      </div>

      <div class="mt-14 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {featuredProducts.map((product) => (
          <div class="fade-in">
            <ProductCard
              slug={product.id.replace(/\.md$/, '')}
              name={product.data.name}
              price={product.data.price}
              image={product.data.image}
              shortDescription={product.data.shortDescription}
              category={product.data.category}
            />
          </div>
        ))}
      </div>

      <div class="mt-12 text-center fade-in">
        <a href="/boutique" class="btn-secondary">
          Voir tous les produits
        </a>
      </div>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════
       SECTION 4 — RÉASSURANCE
       ═══════════════════════════════════════════ -->
  <section class="py-20 sm:py-24">
    <div class="container-site">
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-10 fade-in">
        <ReassuranceItem
          title="Fait main"
          description="Chaque produit est fabriqué artisanalement dans notre atelier, en petites séries, avec un soin particulier."
          icon='<svg class="w-8 h-8 text-vert-doux" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11" /></svg>'
        />
        <ReassuranceItem
          title="100% naturel"
          description="Des ingrédients d'origine naturelle, sans colorant artificiel ni parfum de synthèse. Respectueux de la peau et de la planète."
          icon='<svg class="w-8 h-8 text-vert-doux" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>'
        />
        <ReassuranceItem
          title="Livraison France"
          description="Expédition soignée dans toute la France métropolitaine, avec des emballages recyclables et éco-responsables."
          icon='<svg class="w-8 h-8 text-vert-doux" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" /></svg>'
        />
      </div>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════
       SECTION 5 — ATELIERS (BANDEAU CTA)
       ═══════════════════════════════════════════ -->
  <section class="relative py-24 sm:py-32 overflow-hidden">
    <img
      src="https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?w=1600&h=600&fit=crop&q=80"
      alt="Atelier de fabrication de savons"
      class="absolute inset-0 w-full h-full object-cover"
      loading="lazy"
    />
    <div class="absolute inset-0 bg-black/50"></div>

    <div class="relative z-10 container-site text-center fade-in">
      <span class="text-ocre text-sm font-medium tracking-widest uppercase">Expérience</span>
      <h2 class="mt-3 font-serif text-3xl sm:text-4xl font-semibold text-white leading-snug">
        Participez à nos ateliers
      </h2>
      <p class="mt-6 text-white/85 leading-relaxed max-w-xl mx-auto">
        Venez découvrir les secrets de la saponification à froid et repartez avec votre propre savon. Des ateliers pour adultes et enfants, dans un cadre alpin exceptionnel.
      </p>
      <a
        href="/ateliers"
        class="mt-8 inline-block bg-white text-gray-800 font-medium px-8 py-3.5 rounded-sm hover:bg-beige transition-colors shadow-lg"
      >
        En savoir plus
      </a>
    </div>
  </section>

</Layout>
